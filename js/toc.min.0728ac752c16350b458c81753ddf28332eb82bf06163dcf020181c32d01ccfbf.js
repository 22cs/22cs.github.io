document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("toc-container"),o=document.querySelector(".post-content");if(!t||!o)return;const s=o.querySelectorAll("h2, h3, h4");if(s.length<2){t.style.display="none";return}const n=document.createElement("ul");n.classList.add("toc-list");const e={h2:[],h3:[],h4:[]};s.forEach((t,s)=>{t.id||(t.id="heading-"+s);const o=document.createElement("li");o.classList.add("toc-item","toc-"+t.tagName.toLowerCase());const i=document.createElement("a");if(i.href="#"+t.id,i.textContent=t.textContent,o.appendChild(i),t.tagName==="H2")n.appendChild(o),e.h2.push(o),e.h3=[],e.h4=[];else if(t.tagName==="H3")if(e.h2.length===0)n.appendChild(o);else{let n=e.h2[e.h2.length-1],t=n.querySelector("ul");t||(t=document.createElement("ul"),n.appendChild(t)),t.appendChild(o),e.h3.push(o),e.h4=[]}else if(t.tagName==="H4")if(e.h3.length===0)if(e.h2.length===0)n.appendChild(o);else{let n=e.h2[e.h2.length-1],t=n.querySelector("ul");t||(t=document.createElement("ul"),n.appendChild(t)),t.appendChild(o)}else{let n=e.h3[e.h3.length-1],t=n.querySelector("ul");t||(t=document.createElement("ul"),n.appendChild(t)),t.appendChild(o),e.h4.push(o)}}),t.innerHTML='<h2 class="toc-title">Table of Contents</h2>',t.appendChild(n);const i=t.offsetTop;window.addEventListener("scroll",function(){window.pageYOffset>i-20?t.classList.add("toc-sticky"):t.classList.remove("toc-sticky")}),window.addEventListener("scroll",function(){let e="";s.forEach(function(t){const n=t.offsetTop-100;window.pageYOffset>=n&&(e=t.id)});const n=t.querySelectorAll(".toc-item");if(n.forEach(function(e){e.classList.remove("active")}),e){const n=t.querySelector(`a[href="#${e}"]`);n&&n.parentElement.classList.add("active")}})})